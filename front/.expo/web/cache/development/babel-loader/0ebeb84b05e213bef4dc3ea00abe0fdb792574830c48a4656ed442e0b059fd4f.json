{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport * as React from \"react\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Pressable from \"react-native-web/dist/exports/Pressable\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport { Border, FontSize, Color, FontFamily } from \"../GlobalStyles\";\nimport AsyncStorage from '@react-native-community/async-storage';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar LoginScreen = function LoginScreen(_ref) {\n  var _ref2;\n  var onLoginSuccess = _ref.onLoginSuccess;\n  var _React$useState = React.useState(''),\n    _React$useState2 = _slicedToArray(_React$useState, 2),\n    user = _React$useState2[0],\n    onChangeUser = _React$useState2[1];\n  var _React$useState3 = React.useState(''),\n    _React$useState4 = _slicedToArray(_React$useState3, 2),\n    pass = _React$useState4[0],\n    onChangePass = _React$useState4[1];\n  var _React$useState5 = React.useState('#66e097'),\n    _React$useState6 = _slicedToArray(_React$useState5, 2),\n    inputBorderColor = _React$useState6[0],\n    setInputBorderColor = _React$useState6[1];\n  var _React$useState7 = React.useState(''),\n    _React$useState8 = _slicedToArray(_React$useState7, 2),\n    errorMessage = _React$useState8[0],\n    setErrorMessage = _React$useState8[1];\n  var handleLogin = function handleLogin() {\n    return (_ref2 = _ref2 || _asyncToGenerator(function* () {\n      try {\n        var response = yield fetch('https://cleberiodb.onrender.com/api/Users/login', {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            username: user,\n            password: pass\n          })\n        });\n        if (response.ok) {\n          var data = yield response.json();\n          yield AsyncStorage.setItem(\"user_id\", data.user.id);\n          yield AsyncStorage.setItem(\"user\", data.user.username);\n          onLoginSuccess();\n        } else {\n          setErrorMessage(\"Usuário ou senha incorretos.\");\n          setInputBorderColor('red');\n          setTimeout(function () {\n            setErrorMessage('');\n            setInputBorderColor('#66e097');\n          }, 2000);\n        }\n      } catch (error) {\n        console.error(\"Error during login:\", error);\n        setErrorMessage(\"Usuário ou senha incorretos.\");\n        setInputBorderColor('red');\n        setTimeout(function () {\n          setErrorMessage('');\n          setInputBorderColor('#66e097');\n        }, 2000);\n      }\n    })).apply(this, arguments);\n  };\n  return _jsx(View, {\n    style: styles.loginscreen,\n    children: _jsxs(View, {\n      style: styles.login,\n      children: [errorMessage !== '' && _jsx(Text, {\n        style: styles.errorMessage,\n        children: errorMessage\n      }), _jsx(Text, {\n        style: styles.title,\n        children: \"Cleber.io\"\n      }), _jsx(TextInput, {\n        style: [styles.divLayout, {\n          borderColor: inputBorderColor\n        }],\n        onChangeText: onChangeUser,\n        value: user,\n        placeholder: \"Username\"\n      }), _jsx(TextInput, {\n        style: [styles.divLayout, {\n          borderColor: inputBorderColor\n        }],\n        onChangeText: onChangePass,\n        value: pass,\n        placeholder: \"Password\",\n        secureTextEntry: true\n      }), _jsx(Pressable, {\n        style: styles.button,\n        onPress: handleLogin,\n        children: _jsx(Text, {\n          style: [styles.btntext, styles.btntextTypo],\n          children: \"Entrar\"\n        })\n      })]\n    })\n  });\n};\nvar styles = StyleSheet.create({\n  divLayout1: {\n    borderRadius: Border.br_3xs,\n    top: 0\n  },\n  btntextTypo: {\n    fontSize: FontSize.size_mini,\n    textAlign: \"left\",\n    color: Color.white,\n    position: \"relative\"\n  },\n  divLayout: {\n    paddingLeft: '2%',\n    textAlign: 'left',\n    color: Color.white,\n    fontWeight: \"500\",\n    fontFamily: FontFamily.poppinsMedium,\n    borderStyle: \"solid\",\n    borderColor: \"#66e097\",\n    borderWidth: 1,\n    borderRadius: Border.br_3xs,\n    height: '5vh',\n    width: '100%',\n    position: \"relative\",\n    marginBottom: '2vh'\n  },\n  title: {\n    fontSize: 45,\n    fontWeight: \"900\",\n    fontFamily: FontFamily.poppinsBlack,\n    textAlign: \"center\",\n    color: Color.white,\n    position: \"relative\",\n    marginBottom: '3vh'\n  },\n  btntext: {\n    fontFamily: FontFamily.poppinsRegular\n  },\n  button: {\n    backgroundColor: Color.lightgreen,\n    borderRadius: Border.br_3xs,\n    height: '4.5vh',\n    width: 106,\n    position: \"relative\",\n    display: 'flex',\n    flexDirection: 'column',\n    justifyContent: 'center',\n    alignItems: 'center',\n    width: '17vw'\n  },\n  placeholder: {\n    textAlign: 'center',\n    fontWeight: \"500\",\n    fontFamily: FontFamily.poppinsMedium\n  },\n  login: {\n    display: 'flex',\n    flexDirection: 'column',\n    justifyContent: \"center\",\n    alignItems: 'center',\n    position: \"relative\"\n  },\n  loginscreen: {\n    backgroundColor: Color.darkslategray,\n    width: '100%',\n    height: '100%',\n    display: 'flex',\n    flexDirection: 'column',\n    justifyContent: 'center',\n    alignItems: 'center'\n  },\n  errorMessage: {\n    color: 'red',\n    marginBottom: 50,\n    textAlign: 'center'\n  }\n});\nexport default LoginScreen;","map":{"version":3,"names":["React","Text","StyleSheet","View","Pressable","TextInput","Alert","Border","FontSize","Color","FontFamily","AsyncStorage","jsx","_jsx","jsxs","_jsxs","LoginScreen","_ref","_ref2","onLoginSuccess","_React$useState","useState","_React$useState2","_slicedToArray","user","onChangeUser","_React$useState3","_React$useState4","pass","onChangePass","_React$useState5","_React$useState6","inputBorderColor","setInputBorderColor","_React$useState7","_React$useState8","errorMessage","setErrorMessage","handleLogin","_asyncToGenerator","response","fetch","method","headers","body","JSON","stringify","username","password","ok","data","json","setItem","id","setTimeout","error","console","apply","arguments","style","styles","loginscreen","children","login","title","divLayout","borderColor","onChangeText","value","placeholder","secureTextEntry","button","onPress","btntext","btntextTypo","create","divLayout1","borderRadius","br_3xs","top","fontSize","size_mini","textAlign","color","white","position","paddingLeft","fontWeight","fontFamily","poppinsMedium","borderStyle","borderWidth","height","width","marginBottom","poppinsBlack","poppinsRegular","backgroundColor","lightgreen","display","flexDirection","justifyContent","alignItems","darkslategray"],"sources":["C:/Users/joaop/OneDrive/Área de Trabalho/Unimar/Cleber.io/front/screens/LoginScreen.js"],"sourcesContent":["import * as React from \"react\";\nimport { Text, StyleSheet, View, Pressable, TextInput, Alert } from \"react-native\";\nimport { Border, FontSize, Color, FontFamily } from \"../GlobalStyles\";\nimport AsyncStorage from '@react-native-community/async-storage';\n\nconst LoginScreen = ({ onLoginSuccess }) => {\n  const [user, onChangeUser] = React.useState('');\n  const [pass, onChangePass] = React.useState('');\n  const [inputBorderColor, setInputBorderColor] = React.useState('#66e097');\n  const [errorMessage, setErrorMessage] = React.useState('');\n\n  const handleLogin = async () => { \n    try {\n      const response = await fetch('https://cleberiodb.onrender.com/api/Users/login', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          username: user,\n          password: pass,\n        }),\n      });\n\n      if (response.ok) {\n        const data = await response.json();\n        await AsyncStorage.setItem(\"user_id\", data.user.id);\n        await AsyncStorage.setItem(\"user\", data.user.username);\n        onLoginSuccess();\n      } else {\n        setErrorMessage(\"Usuário ou senha incorretos.\");\n        setInputBorderColor('red');\n\n        setTimeout(() => {\n          setErrorMessage('');\n          setInputBorderColor('#66e097'); // Volta à cor original da borda\n        }, 2000);\n      }\n    } catch (error) {\n      console.error(\"Error during login:\", error);\n      setErrorMessage(\"Usuário ou senha incorretos.\");\n      setInputBorderColor('red');\n      setTimeout(() => {\n        setErrorMessage('');\n        setInputBorderColor('#66e097'); // Volta à cor original da borda\n      }, 2000);\n    }\n  };\n\n  return (\n    <View style={styles.loginscreen}>\n      <View style={styles.login}>\n\n      {errorMessage !== '' && (\n        <Text style={styles.errorMessage}>{errorMessage}</Text> // Mostra a mensagem de erro se houver\n      )}\n\n        {/* TITULO */}\n        <Text style={styles.title}>Cleber.io</Text>\n        \n        <TextInput\n          style={[styles.divLayout, { borderColor: inputBorderColor }]}\n          onChangeText={onChangeUser}\n          value={user}\n          placeholder=\"Username\"\n        />\n\n        <TextInput\n          style={[styles.divLayout, { borderColor: inputBorderColor }]}\n          onChangeText={onChangePass}\n          value={pass}\n          placeholder=\"Password\"\n          secureTextEntry={true}\n        />\n\n        {/*btn*/}\n        <Pressable\n          style={styles.button}\n          onPress={handleLogin}\n        >\n          <Text style={[styles.btntext, styles.btntextTypo]}>Entrar</Text>\n        </Pressable>\n\n      </View>\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  divLayout1: {\n    borderRadius: Border.br_3xs,\n    top: 0,\n  },\n  btntextTypo: {\n    fontSize: FontSize.size_mini,\n    textAlign: \"left\",\n    color: Color.white,\n    position: \"relative\",\n  },\n  divLayout: {\n    paddingLeft:'2%',\n    textAlign:'left',\n    color:Color.white,\n    fontWeight: \"500\",\n    fontFamily: FontFamily.poppinsMedium,\n    borderStyle: \"solid\",\n    borderColor: \"#66e097\",\n    borderWidth: 1,\n    borderRadius: Border.br_3xs,\n    height: '5vh',\n    width: '100%',\n    position: \"relative\",\n    marginBottom:'2vh',\n  },\n  title: {\n    fontSize: 45,\n    fontWeight: \"900\",\n    fontFamily: FontFamily.poppinsBlack,\n    textAlign: \"center\",\n    color: Color.white,\n    position: \"relative\",\n    marginBottom:'3vh'    \n  },\n  btntext: {\n    fontFamily: FontFamily.poppinsRegular,\n  },\n  button: {\n    backgroundColor: Color.lightgreen,\n    borderRadius: Border.br_3xs,\n    height: '4.5vh',\n    width: 106,\n    position: \"relative\",\n    display: 'flex',\n    flexDirection: 'column',\n    justifyContent: 'center',\n    alignItems: 'center',\n    width: '17vw',\n  },\n  placeholder: {\n    textAlign:'center',\n    fontWeight: \"500\",\n    fontFamily: FontFamily.poppinsMedium,\n  },\n  login: {\n    display:'flex',\n    flexDirection:'column',\n    justifyContent:\"center\",\n    alignItems:'center',\n    position: \"relative\",\n  },\n  loginscreen: {\n    backgroundColor: Color.darkslategray,\n    width: '100%',\n    height: '100%',\n    display: 'flex',\n    flexDirection: 'column',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  errorMessage: {\n    color: 'red',\n    marginBottom: 50,\n    textAlign: 'center',\n  },\n});\n\nexport default LoginScreen;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}